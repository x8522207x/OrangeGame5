let startY=0;$(document).ready(()=>{window.addEventListener("resize",h),$(".modal_wrap").css("display","none"),setTimeout(()=>{$(".loading").remove(),$(".modal").toggleClass("hide"),$(".modal_wrap").css("display","")},1e3),[".event_banner",".event_gnb_menu"].forEach(e=>$(e).on("click",()=>{$(".event_banner").toggleClass("-open")})),$(".event_gnb_gamestart").on("click",()=>{window.open("https://galaxy.beanfun.com/webapi/view/login/twp?redirect_url=https://warsofprasia.beanfun.com/Main")}),$(".modal_close").on("click",()=>{$(".plate_modal").toggleClass("-active"),$(".modal.type--youtube").toggleClass("hide"),$(".modal_box_veil").toggleClass("-hide"),$(".modal").css("opacity","0"),$(".youtube--2").remove()}),$(".video_button").on("click",()=>{openVideo("KlUc3H5OsJo")});let e,s;function o(e){return s=>handleSmallHeight(e,s)}function l(e){return s=>{911>$(window).height()?handleSmallHeight(e,s):e.allowTouchMove=!0}}let t,a,i;function n(e){startY=e.touches[0].clientY}function d(e){return s=>{s.stopPropagation();let o=e.slides[e.activeIndex],l=o.scrollTop,t=o.scrollHeight,a=o.clientHeight,i=0===l,n=l+a>=t;0===e.realIndex?n&&s.deltaY>0&&e.slideTo(e.realIndex+1):[1,2,3,4,5,6].includes(e.realIndex)?i&&s.deltaY<0?e.slideTo(e.realIndex-1):n&&s.deltaY>0&&e.slideTo(e.realIndex+1):i&&s.deltaY<0&&e.slideTo(e.realIndex-1)}}let r=()=>{e=new Swiper(".section-pages",{direction:"vertical",touchReleaseOnEdges:!0,mousewheel:{releaseOnEdges:!0},loop:!1,freeMode:!1,noSwiping:!0,noSwipingSelector:"button",autoHeight:!1,speed:1e3,slidesPerView:1,spaceBetween:0,watchSlidesProgress:!0,allowTouchMove:!1,on:{init(e){t=l(e),a=o(e),i=d(e),$(".UNI-footer").clone().appendTo(".section_soon"),$(".UNI-footer")[1]?.remove(),$(".UNI-footer").css("z-index",100).css("position","absolute").css("width","100%").css("height",80),$(".gotop").on("click",()=>{e.slideTo(0),e.slides.forEach(e=>{e.scrollTop=0})}),$(".scroll").on("click",()=>{e.slideTo(1)}),$(".UNI-footer").css("display","none"),document.querySelectorAll(".swiper-slide-page").forEach(e=>{e.children[0].classList.contains("section_spec")&&1280>=$(window).width()&&e.addEventListener("touchmove",a,{passive:!0}),e.addEventListener("wheel",i,{passive:!0}),e.children[0].classList.contains("section_spec")||e.addEventListener("touchmove",t,{passive:!0}),e.addEventListener("touchstart",n,{passive:!0})})},slideChange(e){["active","point"].forEach(e=>[".depth_1",".depth_2"].forEach(s=>$(s).removeClass(e))),$(".swiper-slide-page").off("scroll"),$(".swiper-slide-page").removeClass("scrollable"),$(".gotop").removeClass("show"),$(".UNI-footer").css("display","none"),$(".swiper-slide-page")[e.realIndex].classList.add("scrollable"),$(".depth_1")[e.realIndex].classList.add("active"),$(".depth_1")[e.realIndex].classList.add("point"),0!==e.realIndex&&$(".gotop").addClass("show"),4===e.realIndex&&$(".UNI-footer").css("display","block")}}}),$(".swiper-slide-page")[0].classList.add("scrollable"),e.slideTo(0),$(".depth_1")[0].classList.add("active"),$(".depth_1")[0].classList.add("point");for(let s=0;s<8;s++)addPageClick(s,e)},c=()=>{s=new Swiper(".section-pages",{direction:"vertical",slidesPerView:"auto",touchReleaseOnEdges:!0,mousewheel:{releaseOnEdges:!0,enabled:!0},loop:!1,freeMode:{enabled:!0,sticky:!1,momentumBounce:!1},autoHeight:!0,speed:0,passiveListeners:!0,allowTouchMove:!0,on:{init(e){$(".gotop").on("click",()=>{e.slideTo(0)}),$(".scroll").on("click",()=>{e.slideTo(1)}),$(".UNI-footer").css("display","none")},slideChange(e){$(".gotop").removeClass("show"),$(".UNI-footer").css("display","none"),0!==e.realIndex&&$(".gotop").addClass("show"),4===e.realIndex&&$(".UNI-footer").css("display","block")}}})},p=document.getElementById("page1Video"),g=document.getElementById("video1Source");function h(){let o=document.documentElement,l=`${window.innerHeight}px`;o.style.setProperty("--maxvh",l),$(window).width()>768?($(".event_gnb").addClass("type_clear"),$(".event_gnb").removeClass("type_default"),s&&(s.destroy(!0,!0),s=null,g.src="img/page1/p1_bg.webm",p.load()),e?e.update():setTimeout(()=>r())):(e&&(g.src="img/page1/p1_bg_m.webm",p.load(),e.destroy(!0,!0),e=null,document.querySelectorAll(".swiper-slide-page").forEach(e=>{e.children[0].classList.contains("section_spec")&&1280>=$(window).width()&&e.removeEventListener("touchmove",a,{passive:!0}),e.removeEventListener("wheel",i,{passive:!0}),e.children[0].classList.contains("section_spec")||e.removeEventListener("touchmove",t,{passive:!0}),e.removeEventListener("touchstart",n,{passive:!0})})),$(".event_gnb").addClass("type_default"),$(".event_gnb").removeClass("type_clear"),s?s.update():setTimeout(()=>c()))}$(window).width()>768?(g.src="img/page1/p1_bg.webm",p.load(),$(".event_gnb").addClass("type_clear"),$(".event_gnb").removeClass("type_default"),r()):(g.src="img/page1/p1_bg_m.webm",p.load(),$(".event_gnb").addClass("type_default"),$(".event_gnb").removeClass("type_clear"),c())});const handleSmallHeight=(e,s)=>{e.allowTouchMove=!0,s.stopPropagation();let o=s.touches[0].clientY,l="";o>startY?l="down":o<startY&&(l="up");let t=e.slides[e.activeIndex],a=t.scrollTop,i=t.scrollHeight,n=t.clientHeight,d=0===a,r=a+n>=i;d?0!==e.realIndex&&"down"===l&&e.slideTo(e.realIndex-1):r&&"up"===l&&e.slideTo(e.realIndex+1)},addPageClick=(e,s)=>{$(`.page_p${e+1}`).on("click",()=>{s.slideTo(e)})},openVideo=(e,s)=>{$(".plate_modal").toggleClass("-active"),$(".modal").css("opacity","1").css("visibility","inherit"),$(".modal.type--youtube").toggleClass("hide"),$(".modal_box_veil").toggleClass("-hide"),e?$(".modal_source").append(`<iframe width="auto" height="auto" class="modal_youtube youtube--2"
        src="https://www.youtube.com/embed/${e}?si=1_stAmmA1RL7LFrt"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen></iframe>`):s&&$(".modal_source").append(`<video class="modal_youtube youtube--2" loop autoplay playsinline controls controlslist="nodownload" preload="metadata"><source src=${s} type="video/mp4"></video>`)};